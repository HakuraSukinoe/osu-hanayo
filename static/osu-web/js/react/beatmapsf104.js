(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{15:function(e,t,r){e.exports=r("f54J")},ApLT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=arguments;t.default=function(e){var t=!1;return function(){t||(t=!0,window.requestAnimationFrame((function(){e.apply(void 0,n),t=!1})))}}},LZVK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("kHWY")),s=o(r("khHg"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r,o,i){if(t&&o&&r&&0!==r.length){var a=t.innerHeight,c=t.clientHeight,l=a||c;if(l){var u=(0,s.default)(t),p=u+l,h=(0,n.default)(e)-(0,n.default)(t),d=o*r.length,m=Math.max(0,u-h),f=Math.max(0,Math.min(d,p-h));return{firstItemIndex:Math.max(0,Math.floor(m/o)-i),lastItemIndex:Math.min(r.length,Math.ceil(f/o)+i)-1}}}}},NzAu:function(e,t){e.exports=ReactDOMFactories},SzG1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.items,n=e.itemHeight,s=t.firstItemIndex,o=t.lastItemIndex;return{virtual:{items:o>-1?r.slice(s,o+1):[],style:{height:r.length*n,paddingTop:s*n,boxSizing:"border-box"}}}}},YLtl:function(e,t){e.exports=_},cDcd:function(e,t){e.exports=React},f54J:function(e,t,r){"use strict";r.r(t);var n,s=r("g1Eu"),o=r("qpPZ"),i=r("YLtl"),a=r("EaLk"),c=r("cF9b"),l=r("f4vq"),u=r("cDcd"),p=r("NzAu"),h=r("R6iF"),d=function(e,t){return function(){return e.apply(t,arguments)}},m={}.hasOwnProperty;n=u.createElement;var f,b=function(e){function t(e){this.autoPagerOnScroll=d(this.autoPagerOnScroll,this),this.render=d(this.render,this),this.componentWillUnmount=d(this.componentWillUnmount,this),this.componentDidMount=d(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.throttledAutoPagerOnScroll=_.throttle(this.autoPagerOnScroll,500),this.autoPagerTriggerDistance=3e3,this.autoPagerTarget=u.createRef()}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return Timeout.set(0,this.throttledAutoPagerOnScroll),$(window).on("scroll.paginator",this.throttledAutoPagerOnScroll)},t.prototype.componentWillUnmount=function(){return $(window).off(".paginator"),$(document).off(".paginator"),this.throttledAutoPagerOnScroll.cancel()},t.prototype.render=function(){return n(h.a,{loading:this.props.loading,callback:this.showMore,hasMore:this.props.more,ref:this.autoPagerTarget,modifiers:["beatmapsets","t-ddd"]})},t.prototype.autoPagerOnScroll=function(){if(null==this.props.error&&this.props.more&&!this.props.loading&&null!=this.autoPagerTarget.current&&!(this.autoPagerTarget.current.getBoundingClientRect().top>document.documentElement.clientHeight+this.autoPagerTriggerDistance))return this.showMore()},t.prototype.showMore=function(e){return l.a.beatmapsetSearchController.loadMore()},t}(u.PureComponent),v=function(e,t){return function(){return e.apply(t,arguments)}},y={}.hasOwnProperty,g=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};u.createElement,f=l.a.beatmapsetSearchController;var O,j,w=function(e){function t(e){this.currentSelection=v(this.currentSelection,this),this.selected=v(this.selected,this),this.newSelection=v(this.newSelection,this),this.select=v(this.select,this),this.href=v(this.href,this),this.cast=v(this.cast,this),this.render=v(this.render,this),this.componentWillReceiveProps=v(this.componentWillReceiveProps,this),t.__super__.constructor.call(this,e),this.cache={}}return function(e,t){for(var r in t)y.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.componentWillReceiveProps=function(e){return this.cache={}},t.prototype.render=function(){var e,t,r,n;return Object(p.div)({className:"beatmapsets-search-filter"},null!=this.props.title?Object(p.span)({className:"beatmapsets-search-filter__header"},this.props.title):void 0,Object(p.div)({className:"beatmapsets-search-filter__items"},function(){var s,o,i,a;for(i=this.props.options,a=[],t=s=0,o=i.length;s<o;t=++s)r=i[t],e="beatmapsets-search-filter__item",this.selected(r.id)&&(e+=" beatmapsets-search-filter__item--active"),n=r.name,"general"===this.props.name&&"recommended"===r.id&&null!=this.props.recommendedDifficulty&&(n+=" ("+osu.formatNumber(this.props.recommendedDifficulty,2)+")"),a.push(Object(p.a)({key:t,href:this.href(r),className:e,"data-filter-value":r.id,onClick:this.select},n));return a}.call(this)))},t.prototype.cast=function(e){var t,r,n,s;return null!=(n=null!=(s="function"==typeof(t=BeatmapsetFilter.castFromString)[r=this.props.name]?t[r](e):void 0)?s:e)?n:null},t.prototype.href=function(e){var t,r,n;return r=e.id,(n={})[this.props.name]=this.newSelection(r),t=_.assign({},this.props.filters.values,n),osu.updateQueryString(null,BeatmapsetFilter.queryParamsFromFilters(t))},t.prototype.select=function(e){var t,r;return e.preventDefault(),f.updateFilters(((t={})[""+this.props.name]=null!=(r=this.newSelection(e.target.dataset.filterValue))?r:null,t))},t.prototype.newSelection=function(e){var t;return t=this.cast(e),this.props.multiselect?_(this.currentSelection())[this.selected(t)?"without":"concat"](t).sort().join("."):this.selected(t)?BeatmapsetFilter.defaults[e]:t},t.prototype.selected=function(e){return g.call(this.currentSelection(),e)>=0},t.prototype.currentSelection=function(){var e,t,r;return null!=(e=this.cache).currentSelection?e.currentSelection:e.currentSelection=this.props.multiselect?_(null!=(t=this.props.selected)?t:"").split(".").filter((r=this,function(e){return g.call(_.map(r.props.options,"id"),e)>=0})).value():[this.props.selected]},t}(u.PureComponent),P=function(e,t){return function(){return e.apply(t,arguments)}},k={}.hasOwnProperty;j=u.createElement,O=l.a.beatmapsetSearchController;var S,N=function(e){function t(e){this.setHeaderPinned=P(this.setHeaderPinned,this),this.renderUser=P(this.renderUser,this),this.renderGuest=P(this.renderGuest,this),this.renderFilter=P(this.renderFilter,this),this.onChange=P(this.onChange,this),this.renderStickyContent=P(this.renderStickyContent,this),this.renderBreadcrumbs=P(this.renderBreadcrumbs,this),this.render=P(this.render,this),this.componentWillUnmount=P(this.componentWillUnmount,this),this.componentDidMount=P(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.inputRef=u.createRef(),this.pinnedInputRef=u.createRef(),this.breadcrumbsPortal=document.createElement("div"),this.breadcrumbsPortal.id="search-panel-breadcrumbs-portal",this.contentPortal=document.createElement("div"),this.contentPortal.id="search-panel-content-portal",this.prevText=null,this.breadcrumbsElement=window.stickyHeader.breadcrumbsElement(),this.contentElement=window.stickyHeader.contentElement()}return function(e,t){for(var r in t)k.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return $(document).on("sticky-header:sticking.search-panel",this.setHeaderPinned),this.mountPortal(this.breadcrumbsPortal,this.breadcrumbsElement),this.mountPortal(this.contentPortal,this.contentElement)},t.prototype.componentWillUnmount=function(){return $(document).off(".search-panel"),this.unmountPortal(this.breadcrumbsPortal,this.breadcrumbsElement),this.unmountPortal(this.contentPortal,this.contentElement)},t.prototype.expand=function(e){return e.preventDefault(),O.isExpanded=!0},t.prototype.render=function(){return j(c.a,null,(e=this,function(){return Object(p.div)(null,null!=e.breadcrumbsElement?ReactDOM.createPortal(e.renderBreadcrumbs(),e.breadcrumbsPortal):void 0,null!=e.contentElement?ReactDOM.createPortal(e.renderStickyContent(),e.contentPortal):void 0,Object(p.div)({className:"osu-page osu-page--beatmapsets-search-header"},null!=currentUser.id?e.renderUser():e.renderGuest()))}));var e},t.prototype.renderBreadcrumbs=function(){return null==currentUser.id?null:Object(p.ol)({className:"sticky-header-breadcrumbs"},Object(p.li)({className:"sticky-header-breadcrumbs__item"},Object(p.span)({className:"sticky-header-breadcrumbs__link"},osu.trans("beatmapsets.index.guest_title"))),Object(p.li)({className:"sticky-header-breadcrumbs__item"},Object(p.span)({className:"sticky-header-breadcrumbs__link"},osu.trans("home.search.title"))))},t.prototype.renderStickyContent=function(){return null==currentUser.id?null:Object(p.div)({className:"beatmapsets-search beatmapsets-search--sticky"},Object(p.div)({className:"beatmapsets-search__input-container"},Object(p.input)({className:"beatmapsets-search__input js-beatmapsets-search-input",ref:this.pinnedInputRef,type:"textbox",name:"search",onChange:this.onChange,placeholder:osu.trans("beatmaps.listing.search.prompt"),defaultValue:O.filters.query}),Object(p.div)({className:"beatmapsets-search__icon"},Object(p.i)({className:"fas fa-search"}))),Object(p.div)({className:"beatmapsets-search__filters"},this.renderFilter({name:"status",options:this.props.availableFilters.statuses,showTitle:!1}),this.renderFilter({name:"mode",options:this.props.availableFilters.modes,showTitle:!1})))},t.prototype.onChange=function(e){var t;return t=e.target.value,this.pinnedInputRef.current.value=t,this.inputRef.current.value=t,O.updateFilters({query:t})},t.prototype.renderFilter=function(e){var t,r,n,s,o,i;return t=null!=(s=e.multiselect)&&s,r=e.name,n=e.options,i=null==(o=e.showTitle)||o,j(w,{filters:O.filters,name:r,title:i?osu.trans("beatmaps.listing.search.filters."+r):void 0,options:n,multiselect:t,recommendedDifficulty:O.recommendedDifficulty,selected:O.filters.selectedValue(r)})},t.prototype.renderGuest=function(){return Object(p.div)({ref:this.props.innerRef,className:"beatmapsets-search"},Object(p.div)({className:"osu-page-header__background",style:{backgroundImage:osu.urlPresence(this.props.background)}}),Object(p.div)({className:"beatmapsets-search__input-container js-user-link"},Object(p.input)({className:"beatmapsets-search__input",disabled:!0,type:"textbox",placeholder:osu.trans("beatmaps.listing.search.login_required")}),Object(p.div)({className:"beatmapsets-search__icon"},Object(p.i)({className:"fas fa-search"}))))},t.prototype.renderUser=function(){var e,t;return t=this.props.availableFilters,e="beatmapsets-search",O.isExpanded&&(e+=" beatmapsets-search--expanded"),Object(p.div)({ref:this.props.innerRef,className:e},Object(p.div)({className:"beatmapsets-search__background",style:{backgroundImage:osu.urlPresence(this.props.background)}}),Object(p.div)({className:"beatmapsets-search__input-container"},Object(p.input)({className:"beatmapsets-search__input js-beatmapsets-search-input",ref:this.inputRef,type:"textbox",name:"search",onChange:this.onChange,placeholder:osu.trans("beatmaps.listing.search.prompt"),defaultValue:O.filters.query}),Object(p.div)({className:"beatmapsets-search__icon"},Object(p.i)({className:"fas fa-search"}))),this.renderFilter({multiselect:!0,name:"general",options:t.general}),this.renderFilter({name:"mode",options:t.modes}),this.renderFilter({name:"status",options:t.statuses}),Object(p.a)({className:"beatmapsets-search__expand-link",href:"#",onClick:this.expand},Object(p.div)({},osu.trans("beatmaps.listing.search.options")),Object(p.div)({},Object(p.i)({className:"fas fa-angle-down"}))),Object(p.div)({className:"beatmapsets-search__advanced"},this.renderFilter({name:"genre",options:t.genres}),this.renderFilter({name:"language",options:t.languages}),this.renderFilter({multiselect:!0,name:"extra",options:t.extras}),this.renderFilter({multiselect:!0,name:"rank",options:t.ranks}),this.renderFilter({name:"played",options:t.played})))},t.prototype.setHeaderPinned=function(e,t){return t&&document.activeElement===this.inputRef.current?this.pinnedInputRef.current.focus():t||document.activeElement!==this.pinnedInputRef.current?void 0:this.inputRef.current.focus()},t.prototype.mountPortal=function(e,t){var r;return null!=(r=document.getElementById(e.id))&&r.remove(),null!=t?t.appendChild(e):void 0},t.prototype.unmountPortal=function(e,t){if(null!=e.offsetParent)return null!=t?t.removeChild(e):void 0},t}(u.Component),T=function(e,t){return function(){return e.apply(t,arguments)}},x={}.hasOwnProperty;u.createElement,S=l.a.beatmapsetSearchController;var E,M,C,F,R,I,D,H=function(e){function t(){return this.selected=T(this.selected,this),this.select=T(this.select,this),this.fields=T(this.fields,this),this.render=T(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)x.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t;return Object(p.div)({className:"sort sort--beatmapsets"},Object(p.div)({className:"sort__items"},Object(p.span)({className:"sort__item sort__item--title"},osu.trans("sort._")),function(){var r,n,s,o;for(o=[],r=0,n=(s=this.fields()).length;r<n;r++)e=s[r],t=this.selected(e),o.push(Object(p.a)({key:e,href:"#",className:"sort__item sort__item--button "+(t?"sort__item--active":void 0),onClick:this.select,"data-field":e},osu.trans("beatmaps.listing.search.sorting."+e),Object(p.span)({className:"sort__item-arrow"},Object(p.i)({className:"fas fa-caret-"+("asc"===this.props.sorting.order?"up":"down")}))));return o}.call(this)))},t.prototype.fields=function(){var e,t,r,n;for(e in t={title:!0,artist:!0,difficulty:!0,updated:!1,ranked:!1,rating:!0,plays:!0,favourites:!0,relevance:!1,nominations:!1},_.isEmpty(this.props.filters.query)||(t.relevance=!0),"graveyard"===(r=this.props.filters.status)||"pending"===r?(t.updated=!0,t.nominations=!0,t.plays=!1):"mine"===this.props.filters.status?(t.updated=!0,t.ranked=!0):t.ranked=!0,n=[],t)x.call(t,e)&&t[e]&&n.push(e);return n},t.prototype.select=function(e){var t,r;return e.preventDefault(),t=e.currentTarget.dataset.field,r=this.props.sorting.order,r=this.selected(t)?"asc"===r?"desc":"asc":"desc",S.updateFilters({sort:t+"_"+r})},t.prototype.selected=function(e){return this.props.sorting.field===e},t}(u.PureComponent),q=r("q3z+"),B=r("NW+U"),U=r("pq+g"),A=r.n(U),W={}.hasOwnProperty;R=u.createElement,C=l.a.dataStore.beatmapsetStore,F=l.a.beatmapsetSearchController,E=function(e){var t,r;return r=e.virtual,e.itemHeight,t=_.extend({},r.style),Object(p.div)({style:t},Object(p.div)({className:"beatmapsets__items"},r.items.map((function(e){var t;return Object(p.div)({className:"beatmapsets__items-row",key:function(){var r,n,s;for(s=[],r=0,n=e.length;r<n;r++)t=e[r],s.push(t);return s}().join("-")},function(){var r,n,s;for(s=[],r=0,n=e.length;r<n;r++)t=e[r],s.push(Object(p.div)({className:"beatmapsets__item",key:t},R(q.a,{beatmap:C.get(t)})));return s}())}))))},M=Object(a.l)({BeatmapList:A()()(E),numberOfColumns:osu.isDesktop()?2:1}),Object(a.m)(M,"numberOfColumns",(function(e){if(e.oldValue!==e.newValue)return M.BeatmapList=A()()(E)}));var V=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)W.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return $(window).on("resize.beatmaps-search-content",(function(){var e;if(e=osu.isDesktop()?2:1,M.numberOfColumns!==e)return M.numberOfColumns=e}))},t.prototype.componentWillUnmount=function(){return $(window).off(".beatmaps-search-content")},t.prototype.render=function(){return R(c.a,null,(e=this,function(){var t,r,n,s,o,i;return t=F.currentBeatmapsetIds,r=C.get(t[0]),o=t.length>0?null!=r&&null!=(s=r.covers)?s.cover:void 0:null,i=F.supporterRequiredFilterText,n="beatmapsets",F.isBusy&&(n+=" beatmapsets--dimmed"),R(u.Fragment,null,R(N,{innerRef:e.props.backToTopAnchor,background:o,availableFilters:e.props.availableFilters}),Object(p.div)({className:"js-sticky-header"}),Object(p.div)({className:"osu-layout__row osu-layout__row--page-compact"},Object(p.div)({className:n},null!=currentUser.id?Object(p.div)({className:"beatmapsets__sort"},R(H,{filters:F.filters,sorting:D()})):void 0,Object(p.div)({className:"beatmapsets__content"},F.isSupporterMissing?Object(p.div)({className:"beatmapsets__empty"},R(B.a,{src:"/images/layout/beatmaps/supporter-required.png",alt:osu.trans("beatmaps.listing.search.supporter_filter",{filters:i}),title:osu.trans("beatmaps.listing.search.supporter_filter",{filters:i})}),I(i)):t.length>0?R(M.BeatmapList,{items:_.chunk(t,M.numberOfColumns),itemBuffer:5,itemHeight:205}):Object(p.div)({className:"beatmapsets__empty"},R(B.a,{src:"/images/layout/beatmaps/not-found.png",alt:osu.trans("beatmaps.listing.search.not-found"),title:osu.trans("beatmaps.listing.search.not-found")}),osu.trans("beatmaps.listing.search.not-found-quote"))),F.isSupporterMissing?void 0:Object(p.div)({className:"beatmapsets__paginator"},R(b,{error:F.error,loading:F.isPaging,more:F.hasMore})))))}));var e},t}(u.Component);D=function(){var e;return{field:(e=F.filters.displaySort.split("_"))[0],order:e[1]}},I=function(e){var t;return t='<a href="'+laroute.route("store.products.show",{product:"supporter-tag"})+'">'+osu.trans("beatmaps.listing.search.supporter_filter_quote.link_text")+"</a>",Object(p.p)({dangerouslySetInnerHTML:{__html:osu.trans("beatmaps.listing.search.supporter_filter_quote._",{filters:e,link:t})}})};const L=l.a.beatmapsetSearchController;let z=class extends u.Component{constructor(e){super(e),this.backToTop=u.createRef(),this.backToTopAnchor=u.createRef(),this.observerDisposers=[],this.scrollPositionHandler=e=>{if(!e.newValue.restore&&!Object(i.isEqual)(e.oldValue,e.newValue)){if("completed"===e.newValue.state&&0===e.newValue.from&&this.backToTopAnchor.current){const e=this.backToTopAnchor.current.getBoundingClientRect().top;e<0&&window.scrollTo(window.pageXOffset,window.pageYOffset+e)}"searching"===e.newValue.state&&this.backToTop.current&&this.backToTop.current.reset()}},this.searchStatusErrorHandler=e=>{null!=e.newValue.error&&osu.ajaxError(e.newValue.error)},this.observerDisposers.push(Object(a.m)(L,"searchStatus",this.searchStatusErrorHandler))}componentDidMount(){this.observerDisposers.push(Object(a.m)(L,"searchStatus",this.scrollPositionHandler)),$(document).on("turbolinks:before-visit.beatmaps-main",()=>{L.cancel()})}componentWillUnmount(){$(document).off(".beatmaps-main"),L.cancel();let e=this.observerDisposers.shift();for(;e;)e(),e=this.observerDisposers.shift()}render(){return u.createElement(u.Fragment,null,u.createElement(o.a,{theme:"beatmapsets",section:osu.trans("layout.header.beatmapsets._"),subSection:osu.trans("layout.header.beatmapsets.index")}),u.createElement(V,{availableFilters:this.props.availableFilters,backToTopAnchor:this.backToTopAnchor}),u.createElement(s.a,{anchor:this.backToTopAnchor,ref:this.backToTop}))}};z=function(e,t,r,n){var s,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}([c.d],z),reactTurbolinks.registerPersistent("beatmaps",z,!0,()=>{const e=osu.parseJson("json-beatmaps",!0);return null!=e&&l.a.beatmapsetSearchController.initialize(e),l.a.beatmapsetSearchController.restoreTurbolinks(),{availableFilters:osu.parseJson("json-filters")}})},faye:function(e,t){e.exports=ReactDOM},kHWY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return void 0!==t&&t?(t.offsetTop||0)+e(t.offsetParent):0}},khHg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.pageYOffset?e.pageYOffset:e.document?e.document.documentElement&&e.document.documentElement.scrollTop?e.document.documentElement.scrollTop:e.document.body&&e.document.body.scrollTop?e.document.body.scrollTop:0:e.scrollY||e.scrollTop||0}},"pq+g":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r("cDcd"),i=h(o),a=h(r("faye")),c=h(r("rf6O")),l=h(r("LZVK")),u=h(r("ApLT")),p=h(r("SzG1"));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.default;return function(r){var p,h;return h=p=function(o){function c(t){d(this,c);var r=m(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t));return r._isMounted=!1,r.options=n({container:"undefined"!=typeof window?window:void 0},e),r.state={firstItemIndex:0,lastItemIndex:-1},e&&e.initialState&&(r.state=n({},r.state,e.initialState)),r.refreshState=r.refreshState.bind(r),"undefined"!=typeof window&&"requestAnimationFrame"in window&&(r.refreshState=(0,u.default)(r.refreshState)),r}return f(c,o),s(c,[{key:"setStateIfNeeded",value:function(e,t,r,n,s){var o=(0,l.default)(e,t,r,n,s);void 0!==o&&(o.firstItemIndex>o.lastItemIndex||o.firstItemIndex===this.state.firstItemIndex&&o.lastItemIndex===this.state.lastItemIndex||this.setState(o))}},{key:"refreshState",value:function(){if(this._isMounted){var e=this.props,t=e.itemHeight,r=e.items,n=e.itemBuffer;this.setStateIfNeeded(this.domNode,this.options.container,r,t,n)}}},{key:"componentWillMount",value:function(){this._isMounted=!0}},{key:"componentDidMount",value:function(){this.domNode=a.default.findDOMNode(this),this.refreshState(),this.options.container.addEventListener("scroll",this.refreshState),this.options.container.addEventListener("resize",this.refreshState)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.options.container.removeEventListener("scroll",this.refreshState),this.options.container.removeEventListener("resize",this.refreshState)}},{key:"componentWillReceiveProps",value:function(e){var t=e.itemHeight,r=e.items,n=e.itemBuffer;this.setStateIfNeeded(this.domNode,this.options.container,r,t,n)}},{key:"render",value:function(){return i.default.createElement(r,n({},this.props,t(this.props,this.state)))}}]),c}(o.PureComponent),p.propTypes={items:c.default.array.isRequired,itemHeight:c.default.number.isRequired,itemBuffer:c.default.number},p.defaultProps={itemBuffer:0},h}}},rf6O:function(e,t){e.exports=PropTypes},wy2R:function(e,t){e.exports=moment}},[[15,0]]]);
//# sourceMappingURL=beatmaps.js.map